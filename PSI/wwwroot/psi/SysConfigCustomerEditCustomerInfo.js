var SysConfigCustomerEditCustomerInfo = /** @class */ (function () {
    function SysConfigCustomerEditCustomerInfo(baseUrl) {
        if (baseUrl === void 0) { baseUrl = ""; }
        this.testQQ = new Map();
        this.testQQ2 = new Map();
        this.testQQ3 = [{}];
        this.testQQ4 = [null];
        /* Field Doms */
        this.DomOfCarGuid = document.getElementById('CarGuid');
        this.DomOfCustomerGuid = document.getElementById('CustomerGuid');
        this.DomOfEditCompanyName = document.getElementById('EditCompanyName');
        this.DomOfShowEditCompanyName = document.getElementById('show-edit-companyName');
        this.DomOfEditTaxId = document.getElementById('EditTaxId');
        this.DomOfShowEditTaxId = document.getElementById('show-edit-taxId');
        this.DomOfEditCustomerName = document.getElementById('EditCustomerName');
        this.DomOfShowEditCustomerName = document.getElementById('show-edit-customerName');
        this.DomOfEditPsiType = document.getElementById('EditPsiType');
        this.DomOfShowEditPsiType = document.getElementById('show-edit-psiType');
        this.DomOfEditContentInfo = document.getElementById('EditContentInfo');
        this.DomOfShowEditContentInfo = document.getElementById('show-edit-contentInfo');
        this.DomOfEditAddress = document.getElementById('EditAddress');
        this.DomOfShowEditAddress = document.getElementById('show-edit-address');
        this.DomOfIsChanged = document.getElementById("IsChanged");
        this.BaseUrl = baseUrl;
        this.CustomerAPI = new CustomerAPIClass(this.BaseUrl);
        this.SysConfigPageHelper = new SysConfigPageHelper(this.BaseUrl);
        this.testQQ.set("wow", { email: "abcd", rating: 500 });
        this.testQQ.set("wow2", { email: "abcdefg", rating: 501 });
        this.testQQ2.set("wow3", { haha: "456", cc: 999 });
        this.testQQ2.set("wow3", { haha: "456", cc: 999 });
        var abc = { haha: "abc", cc: 456 };
        var abc2 = { haha: "abc7", cc: 4567 };
        this.testQQ3.push(abc);
        this.testQQ3.push(abc2);
        this.testQQ4.push(abc2);
        console.log("wow " + this.testQQ3.filter(function (value) { return Object.keys(value).length !== 0; }).length);
    }
    SysConfigCustomerEditCustomerInfo.prototype.PagePluginInit = function () {
        var curObj = this;
        /* Page Initialize */
        // Select2 Elements
        $('.select2bs4').select2({
            theme: 'bootstrap4',
            placeholder: "請選擇項目"
        });
        // jquery dialog
        $("#dialog-confirm").dialog({
            resizable: false,
            height: "auto",
            width: 400,
            modal: true,
            autoOpen: false,
            buttons: {
                "儲存": function () {
                    $('#edit-customer-form').submit();
                    $(this).dialog("close");
                },
                "取消": function () {
                    $(this).dialog("close");
                }
            }
        });
    };
    SysConfigCustomerEditCustomerInfo.prototype.PageEventInit = function () {
        var curObj = this;
        /* Page Events */
        // 表單建立
        $('#form_create').on('click', function () {
            $("#dialog-confirm").dialog("open");
        });
        $('#EditCompanyName').on('keyup', function () {
            if (curObj.DomOfEditCompanyName.value.length > 0) {
                curObj.DomOfShowEditCompanyName.innerHTML = "=> \u8B8A\u66F4\u70BA : " + curObj.DomOfEditCompanyName.value;
                curObj.DomOfShowEditCompanyName.style.color = "red";
                curObj.SetChageStatus(true);
            }
            else {
                curObj.DomOfShowEditCompanyName.innerHTML = "";
            }
        });
        $('#EditTaxId').on('keyup', function () {
            if (curObj.DomOfEditTaxId.value.length > 0) {
                curObj.DomOfShowEditTaxId.innerHTML = "=> \u8B8A\u66F4\u70BA : " + curObj.DomOfEditTaxId.value;
                curObj.DomOfShowEditTaxId.style.color = "red";
                curObj.SetChageStatus(true);
            }
            else {
                curObj.DomOfShowEditTaxId.innerHTML = "";
            }
        });
        $('#EditCustomerName').on('keyup', function () {
            if (curObj.DomOfEditCustomerName.value.length > 0) {
                curObj.DomOfShowEditCustomerName.innerHTML = "=> \u8B8A\u66F4\u70BA : " + curObj.DomOfEditCustomerName.value;
                curObj.DomOfShowEditCustomerName.style.color = "red";
                curObj.SetChageStatus(true);
            }
            else {
                curObj.DomOfShowEditCustomerName.innerHTML = "";
            }
        });
        $('#EditPsiType').on('change', function () {
            var selectedText = curObj.DomOfEditPsiType.options[curObj.DomOfEditPsiType.selectedIndex].text;
            if (selectedText.length > 0) {
                curObj.DomOfShowEditPsiType.innerHTML = "=> \u8B8A\u66F4\u70BA : " + selectedText;
                curObj.DomOfShowEditPsiType.style.color = "red";
                curObj.SetChageStatus(true);
            }
            else {
                curObj.DomOfShowEditPsiType.innerHTML = "";
            }
        });
        $('#EditContentInfo').on('keyup', function () {
            if (curObj.DomOfEditContentInfo.value.length > 0) {
                curObj.DomOfShowEditContentInfo.innerHTML = "=> \u8B8A\u66F4\u70BA : " + curObj.DomOfEditContentInfo.value;
                curObj.DomOfShowEditContentInfo.style.color = "red";
                curObj.SetChageStatus(true);
            }
            else {
                curObj.DomOfShowEditContentInfo.innerHTML = "";
            }
        });
        $('#EditAddress').on('keyup', function () {
            if (curObj.DomOfEditAddress.value.length > 0) {
                curObj.DomOfShowEditAddress.innerHTML = "=> \u8B8A\u66F4\u70BA : " + curObj.DomOfEditAddress.value;
                curObj.DomOfShowEditAddress.style.color = "red";
                curObj.SetChageStatus(true);
            }
            else {
                curObj.DomOfShowEditAddress.innerHTML = "";
            }
        });
        // 車牌編輯
        $('#has-carno').on('click', "button", function () {
            var pageRs = curObj.SysConfigPageHelper.GetCarNoInfoModel($(this).val().toString(), true);
            $.when(pageRs).then(function (data) {
                $("div[name=model-temp-carnoinfo]").html(data);
                var modalObj = $("div[name=model-temp-carnoinfo]").find('#myModal');
                modalObj.modal('show');
            });
        });
        // 新增車牌
        //$('#add-carno').on('click', function () {
        //    pageMain.Test3Func();
        //})
        //$('#add-carno').on('click',["Wayne","abc"], function (event,myName) {
        //    alert(`WoW => ${event.data} & ${myName}`);
        //})
        //$("#add-carno").on("click", function (event) {
        //    let pageRs = curObj.SysConfigPageHelper.GetCarNoInfoModel();
        //    $.when(pageRs).then(function (data) {
        //        $("div[name=model-temp-carnoinfo]").html(data);
        //        var modalObj = $("div[name=model-temp-carnoinfo]").find('#myModal');
        //        modalObj.modal('show');
        //        // modalObj.find("#testqqc").on('click', '.tr-row',
        //        modalObj.find("#testqqc").on('click',
        //            function () {
        //                modalObj.modal('hide');
        //            });
        //    });
        //});
    };
    SysConfigCustomerEditCustomerInfo.prototype.PageValidateInit = function () {
        // Form Validation
        $('#edit-customer-form').validate({
            submitHandler: function (form) {
                var isChanged = document.getElementById("IsChanged").value;
                if (isChanged === "true") {
                    form.submit();
                }
                else {
                    alert("並未有內容變更，故不進行資料變更!!");
                }
            },
            rules: {
                CompanyName: {
                    required: true
                },
                CustomerName: {
                    required: true
                }
            },
            messages: {
                CompanyName: {
                    required: "該欄位為必填!!"
                },
                CustomerName: {
                    required: "該欄位為必填!!"
                }
            },
            errorElement: 'span',
            errorPlacement: function (error, element) {
                error.addClass('invalid-feedback');
                element.closest('.form-group').append(error);
            },
            highlight: function (element, errorClass, validClass) {
                $(element).addClass('is-invalid');
            },
            unhighlight: function (element, errorClass, validClass) {
                $(element).removeClass('is-invalid');
            }
        });
    };
    /* Page Function */
    SysConfigCustomerEditCustomerInfo.prototype.SetChageStatus = function (result) {
        this.DomOfIsChanged.value = result.toString();
    };
    return SysConfigCustomerEditCustomerInfo;
}());
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3lzQ29uZmlnQ3VzdG9tZXJFZGl0Q3VzdG9tZXJJbmZvLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc2NyaXB0cy9TeXNDb25maWdDdXN0b21lckVkaXRDdXN0b21lckluZm8udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBUUE7SUFnQkksMkNBQVksT0FBb0I7UUFBcEIsd0JBQUEsRUFBQSxZQUFvQjtRQU56QixXQUFNLEdBQXdCLElBQUksR0FBRyxFQUFrQixDQUFDO1FBQ3hELFlBQU8sR0FBOEMsSUFBSSxHQUFHLEVBQXdDLENBQUM7UUFDckcsWUFBTyxHQUFtQyxDQUFDLEVBQUUsQ0FBbUMsQ0FBQztRQUNqRixZQUFPLEdBQW1DLENBQUMsSUFBSSxDQUFDLENBQUM7UUFxQnhELGdCQUFnQjtRQUNULGlCQUFZLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQXFCLENBQUM7UUFDdEUsc0JBQWlCLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQXFCLENBQUM7UUFDaEYseUJBQW9CLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxpQkFBaUIsQ0FBcUIsQ0FBQztRQUN0Riw2QkFBd0IsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLHVCQUF1QixDQUFvQixDQUFDO1FBQy9GLG1CQUFjLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQXFCLENBQUM7UUFDMUUsdUJBQWtCLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxpQkFBaUIsQ0FBb0IsQ0FBQztRQUNuRiwwQkFBcUIsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLGtCQUFrQixDQUFxQixDQUFDO1FBQ3hGLDhCQUF5QixHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsd0JBQXdCLENBQW9CLENBQUM7UUFDakcscUJBQWdCLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQXNCLENBQUM7UUFDL0UseUJBQW9CLEdBQUcsUUFBUSxDQUFDLGNBQWMs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UGVyc29uID0ge1xyXG4gICAgZW1haWw6IHN0cmluZztcclxuICAgIHJhdGluZzogbnVtYmVyO1xyXG59O1xyXG5cclxuXHJcblxyXG5cclxuY2xhc3MgU3lzQ29uZmlnQ3VzdG9tZXJFZGl0Q3VzdG9tZXJJbmZvIHtcclxuICAgIC8vIEJhc2UgUG9ycGVyaXRlc1xyXG4gICAgcmVhZG9ubHkgQmFzZVVybDogc3RyaW5nO1xyXG5cclxuICAgIC8vIEZvciBQb3N0XHJcblxyXG5cclxuICAgIC8vIFJlZmVyZW5jZXMgIFxyXG4gICAgcHJpdmF0ZSBDdXN0b21lckFQSTogQ3VzdG9tZXJBUElDbGFzcztcclxuICAgIHB1YmxpYyBTeXNDb25maWdQYWdlSGVscGVyOiBTeXNDb25maWdQYWdlSGVscGVyO1xyXG4gICAgcHVibGljIHRlc3RRUTogTWFwPHN0cmluZywgUGVyc29uPiA9IG5ldyBNYXA8c3RyaW5nLCBQZXJzb24+KCk7XHJcbiAgICBwdWJsaWMgdGVzdFFRMjogTWFwPHN0cmluZywgeyBoYWhhOiBzdHJpbmcsIGNjOiBudW1iZXIgfT4gPSBuZXcgTWFwPHN0cmluZywgeyBoYWhhOiBzdHJpbmcsIGNjOiBudW1iZXIgfT4oKTtcclxuICAgIHB1YmxpYyB0ZXN0UVEzOiBbeyBoYWhhOiBzdHJpbmcsIGNjOiBudW1iZXIgfV0gPSBbe31dIGFzIFt7IGhhaGE6IHN0cmluZywgY2M6IG51bWJlciB9XTtcclxuICAgIHB1YmxpYyB0ZXN0UVE0OiBbeyBoYWhhOiBzdHJpbmcsIGNjOiBudW1iZXIgfV0gPSBbbnVsbF07XHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGJhc2VVcmw6IHN0cmluZyA9IFwiXCIpIHtcclxuICAgICAgICB0aGlzLkJhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgICAgIHRoaXMuQ3VzdG9tZXJBUEkgPSBuZXcgQ3VzdG9tZXJBUElDbGFzcyh0aGlzLkJhc2VVcmwpO1xyXG4gICAgICAgIHRoaXMuU3lzQ29uZmlnUGFnZUhlbHBlciA9IG5ldyBTeXNDb25maWdQYWdlSGVscGVyKHRoaXMuQmFzZVVybCk7XHJcbiAgICAgICAgdGhpcy50ZXN0UVEuc2V0KFwid293XCIsIHsgZW1haWw6IFwiYWJjZFwiLCByYXRpbmc6IDUwMCB9KTtcclxuICAgICAgICB0aGlzLnRlc3RRUS5zZXQoXCJ3b3cyXCIsIHsgZW1haWw6IFwiYWJjZGVmZ1wiLCByYXRpbmc6IDUwMSB9KTtcclxuICAgICAgICB0aGlzLnRlc3RRUTIuc2V0KFwid293M1wiLCB7IGhhaGE6IFwiNDU2XCIsIGNjOiA5OTkgfSk7XHJcbiAgICAgICAgdGhpcy50ZXN0UVEyLnNldChcIndvdzNcIiwgeyBoYWhhOiBcIjQ1NlwiLCBjYzogOTk5IH0pO1xyXG4gICAgICAgIGxldCBhYmMgPSB7IGhhaGE6IFwiYWJjXCIsIGNjOiA0NTYgfTtcclxuICAgICAgICBsZXQgYWJjMiA9IHsgaGFoYTogXCJhYmM3XCIsIGNjOiA0NTY3IH07XHJcbiAgICAgICAgdGhpcy50ZXN0UVEzLnB1c2goYWJjKTtcclxuICAgICAgICB0aGlzLnRlc3RRUTMucHVzaChhYmMyKTtcclxuICAgICAgICB0aGlzLnRlc3RRUTQucHVzaChhYmMyKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coYHdvdyAke3RoaXMudGVzdFFRMy5maWx0ZXIodmFsdWUgPT4gT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCAhPT0gMCkubGVuZ3RofWApO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKiBGaWVsZCBEb21zICovXHJcbiAgICBwdWJsaWMgRG9tT2ZDYXJHdWlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0Nhckd1aWQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgcHVibGljIERvbU9mQ3VzdG9tZXJHdWlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0N1c3RvbWVyR3VpZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICBwdWJsaWMgRG9tT2ZFZGl0Q29tcGFueU5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRWRpdENvbXBhbnlOYW1lJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgIHB1YmxpYyBEb21PZlNob3dFZGl0Q29tcGFueU5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hvdy1lZGl0LWNvbXBhbnlOYW1lJykgYXMgSFRNTFNwYW5FbGVtZW50O1xyXG4gICAgcHVibGljIERvbU9mRWRpdFRheElkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0VkaXRUYXhJZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICBwdWJsaWMgRG9tT2ZTaG93RWRpdFRheElkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nob3ctZWRpdC10YXhJZCcpIGFzIEhUTUxTcGFuRWxlbWVudDtcclxuICAgIHB1YmxpYyBEb21PZkVkaXRDdXN0b21lck5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRWRpdEN1c3RvbWVyTmFtZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICBwdWJsaWMgRG9tT2ZTaG93RWRpdEN1c3RvbWVyTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaG93LWVkaXQtY3VzdG9tZXJOYW1lJykgYXMgSFRNTFNwYW5FbGVtZW50O1xyXG4gICAgcHVibGljIERvbU9mRWRpdFBzaVR5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRWRpdFBzaVR5cGUnKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgIHB1YmxpYyBEb21PZlNob3dFZGl0UHNpVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaG93LWVkaXQtcHNpVHlwZScpIGFzIEhUTUxTcGFuRWxlbWVudDtcclxuICAgIHB1YmxpYyBEb21PZkVkaXRDb250ZW50SW5mbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdFZGl0Q29udGVudEluZm8nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgcHVibGljIERvbU9mU2hvd0VkaXRDb250ZW50SW5mbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaG93LWVkaXQtY29udGVudEluZm8nKSBhcyBIVE1MU3BhbkVsZW1lbnQ7XHJcbiAgICBwdWJsaWMgRG9tT2ZFZGl0QWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdFZGl0QWRkcmVzcycpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICBwdWJsaWMgRG9tT2ZTaG93RWRpdEFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hvdy1lZGl0LWFkZHJlc3MnKSBhcyBIVE1MU3BhbkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIERvbU9mSXNDaGFuZ2VkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJJc0NoYW5nZWRcIikgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHJcblxyXG4gICAgcHVibGljIFBhZ2VQbHVnaW5Jbml0KCkge1xyXG4gICAgICAgIGNvbnN0IGN1ck9iaiA9IHRoaXM7XHJcbiAgICAgICAgLyogUGFnZSBJbml0aWFsaXplICovXHJcbiAgICAgICAgLy8gU2VsZWN0MiBFbGVtZW50c1xyXG4gICAgICAgICQoJy5zZWxlY3QyYnM0Jykuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgIHRoZW1lOiAnYm9vdHN0cmFwNCcsXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIuiri+mBuOaTh+mgheebrlwiXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy8ganF1ZXJ5IGRpYWxvZ1xyXG4gICAgICAgICQoXCIjZGlhbG9nLWNvbmZpcm1cIikuZGlhbG9nKHtcclxuICAgICAgICAgICAgcmVzaXphYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBcImF1dG9cIixcclxuICAgICAgICAgICAgd2lkdGg6IDQwMCxcclxuICAgICAgICAgICAgbW9kYWw6IHRydWUsXHJcbiAgICAgICAgICAgIGF1dG9PcGVuOiBmYWxzZSxcclxuICAgICAgICAgICAgYnV0dG9uczoge1xyXG4gICAgICAgICAgICAgICAgXCLlhLLlrZhcIjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNlZGl0LWN1c3RvbWVyLWZvcm0nKS5zdWJtaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmRpYWxvZyhcImNsb3NlXCIpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIFwi5Y+W5raIXCI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmRpYWxvZyhcImNsb3NlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgUGFnZUV2ZW50SW5pdCgpIHtcclxuICAgICAgICBjb25zdCBjdXJPYmogPSB0aGlzO1xyXG5cclxuXHJcblxyXG4gICAgICAgIC8qIFBhZ2UgRXZlbnRzICovXHJcbiAgICAgICAgLy8g6KGo5Zau5bu656uLXHJcbiAgICAgICAgJCgnI2Zvcm1fY3JlYXRlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKFwiI2RpYWxvZy1jb25maXJtXCIpLmRpYWxvZyhcIm9wZW5cIik7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgJCgnI0VkaXRDb21wYW55TmFtZScpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKGN1ck9iai5Eb21PZkVkaXRDb21wYW55TmFtZS52YWx1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJPYmouRG9tT2ZTaG93RWRpdENvbXBhbnlOYW1lLmlubmVySFRNTCA9IGA9PiDorormm7TngrogOiAke2N1ck9iai5Eb21PZkVkaXRDb21wYW55TmFtZS52YWx1ZX1gO1xyXG4gICAgICAgICAgICAgICAgY3VyT2JqLkRvbU9mU2hvd0VkaXRDb21wYW55TmFtZS5zdHlsZS5jb2xvciA9IFwicmVkXCI7XHJcbiAgICAgICAgICAgICAgICBjdXJPYmouU2V0Q2hhZ2VTdGF0dXModHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJPYmouRG9tT2ZTaG93RWRpdENvbXBhbnlOYW1lLmlubmVySFRNTCA9IFwiXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgJCgnI0VkaXRUYXhJZCcpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKGN1ck9iai5Eb21PZkVkaXRUYXhJZC52YWx1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJPYmouRG9tT2ZTaG93RWRpdFRheElkLmlubmVySFRNTCA9IGA9PiDorormm7TngrogOiAke2N1ck9iai5Eb21PZkVkaXRUYXhJZC52YWx1ZX1gO1xyXG4gICAgICAgICAgICAgICAgY3VyT2JqLkRvbU9mU2hvd0VkaXRUYXhJZC5zdHlsZS5jb2xvciA9IFwicmVkXCI7XHJcbiAgICAgICAgICAgICAgICBjdXJPYmouU2V0Q2hhZ2VTdGF0dXModHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJPYmouRG9tT2ZTaG93RWRpdFRheElkLmlubmVySFRNTCA9IFwiXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgJCgnI0VkaXRDdXN0b21lck5hbWUnKS5vbigna2V5dXAnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJPYmouRG9tT2ZFZGl0Q3VzdG9tZXJOYW1lLnZhbHVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGN1ck9iai5Eb21PZlNob3dFZGl0Q3VzdG9tZXJOYW1lLmlubmVySFRNTCA9IGA9PiDorormm7TngrogOiAke2N1ck9iai5Eb21PZkVkaXRDdXN0b21lck5hbWUudmFsdWV9YDtcclxuICAgICAgICAgICAgICAgIGN1ck9iai5Eb21PZlNob3dFZGl0Q3VzdG9tZXJOYW1lLnN0eWxlLmNvbG9yID0gXCJyZWRcIjtcclxuICAgICAgICAgICAgICAgIGN1ck9iai5TZXRDaGFnZVN0YXR1cyh0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGN1ck9iai5Eb21PZlNob3dFZGl0Q3VzdG9tZXJOYW1lLmlubmVySFRNTCA9IFwiXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgJCgnI0VkaXRQc2lUeXBlJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRUZXh0ID0gY3VyT2JqLkRvbU9mRWRpdFBzaVR5cGUub3B0aW9uc1tjdXJPYmouRG9tT2ZFZGl0UHNpVHlwZS5zZWxlY3RlZEluZGV4XS50ZXh0O1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRUZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGN1ck9iai5Eb21PZlNob3dFZGl0UHNpVHlwZS5pbm5lckhUTUwgPSBgPT4g6K6K5pu054K6IDogJHtzZWxlY3RlZFRleHR9YDtcclxuICAgICAgICAgICAgICAgIGN1ck9iai5Eb21PZlNob3dFZGl0UHNpVHlwZS5zdHlsZS5jb2xvciA9IFwicmVkXCI7XHJcbiAgICAgICAgICAgICAgICBjdXJPYmouU2V0Q2hhZ2VTdGF0dXModHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJPYmouRG9tT2ZTaG93RWRpdFBzaVR5cGUuaW5uZXJIVE1MID0gXCJcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAkKCcjRWRpdENvbnRlbnRJbmZvJykub24oJ2tleXVwJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoY3VyT2JqLkRvbU9mRWRpdENvbnRlbnRJbmZvLnZhbHVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGN1ck9iai5Eb21PZlNob3dFZGl0Q29udGVudEluZm8uaW5uZXJIVE1MID0gYD0+IOiuiuabtOeCuiA6ICR7Y3VyT2JqLkRvbU9mRWRpdENvbnRlbnRJbmZvLnZhbHVlfWA7XHJcbiAgICAgICAgICAgICAgICBjdXJPYmouRG9tT2ZTaG93RWRpdENvbnRlbnRJbmZvLnN0eWxlLmNvbG9yID0gXCJyZWRcIjtcclxuICAgICAgICAgICAgICAgIGN1ck9iai5TZXRDaGFnZVN0YXR1cyh0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGN1ck9iai5Eb21PZlNob3dFZGl0Q29udGVudEluZm8uaW5uZXJIVE1MID0gXCJcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAkKCcjRWRpdEFkZHJlc3MnKS5vbigna2V5dXAnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJPYmouRG9tT2ZFZGl0QWRkcmVzcy52YWx1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJPYmouRG9tT2ZTaG93RWRpdEFkZHJlc3MuaW5uZXJIVE1MID0gYD0+IOiuiuabtOeCuiA6ICR7Y3VyT2JqLkRvbU9mRWRpdEFkZHJlc3MudmFsdWV9YDtcclxuICAgICAgICAgICAgICAgIGN1ck9iai5Eb21PZlNob3dFZGl0QWRkcmVzcy5zdHlsZS5jb2xvciA9IFwicmVkXCI7XHJcbiAgICAgICAgICAgICAgICBjdXJPYmouU2V0Q2hhZ2VTdGF0dXModHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJPYmouRG9tT2ZTaG93RWRpdEFkZHJlc3MuaW5uZXJIVE1MID0gXCJcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy8g6LuK54mM57eo6LyvXHJcbiAgICAgICAgJCgnI2hhcy1jYXJubycpLm9uKCdjbGljaycsIGBidXR0b25gLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxldCBwYWdlUnMgPSBjdXJPYmouU3lzQ29uZmlnUGFnZUhlbHBlci5HZXRDYXJOb0luZm9Nb2RlbCgkKHRoaXMpLnZhbCgpLnRvU3RyaW5nKCksIHRydWUpO1xyXG4gICAgICAgICAgICAkLndoZW4ocGFnZVJzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiZGl2W25hbWU9bW9kZWwtdGVtcC1jYXJub2luZm9dXCIpLmh0bWwoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9kYWxPYmogPSAkKFwiZGl2W25hbWU9bW9kZWwtdGVtcC1jYXJub2luZm9dXCIpLmZpbmQoJyNteU1vZGFsJyk7XHJcbiAgICAgICAgICAgICAgICBtb2RhbE9iai5tb2RhbCgnc2hvdycpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAvLyDmlrDlop7ou4rniYxcclxuICAgICAgICAvLyQoJyNhZGQtY2Fybm8nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gICAgcGFnZU1haW4uVGVzdDNGdW5jKCk7XHJcbiAgICAgICAgLy99KVxyXG4gICAgICAgIC8vJCgnI2FkZC1jYXJubycpLm9uKCdjbGljaycsW1wiV2F5bmVcIixcImFiY1wiXSwgZnVuY3Rpb24gKGV2ZW50LG15TmFtZSkge1xyXG4gICAgICAgIC8vICAgIGFsZXJ0KGBXb1cgPT4gJHtldmVudC5kYXRhfSAmICR7bXlOYW1lfWApO1xyXG4gICAgICAgIC8vfSlcclxuICAgICAgICAvLyQoXCIjYWRkLWNhcm5vXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gICAgbGV0IHBhZ2VScyA9IGN1ck9iai5TeXNDb25maWdQYWdlSGVscGVyLkdldENhck5vSW5mb01vZGVsKCk7XHJcbiAgICAgICAgLy8gICAgJC53aGVuKHBhZ2VScykudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIC8vICAgICAgICAkKFwiZGl2W25hbWU9bW9kZWwtdGVtcC1jYXJub2luZm9dXCIpLmh0bWwoZGF0YSk7XHJcbiAgICAgICAgLy8gICAgICAgIHZhciBtb2RhbE9iaiA9ICQoXCJkaXZbbmFtZT1tb2RlbC10ZW1wLWNhcm5vaW5mb11cIikuZmluZCgnI215TW9kYWwnKTtcclxuICAgICAgICAvLyAgICAgICAgbW9kYWxPYmoubW9kYWwoJ3Nob3cnKTtcclxuXHJcblxyXG4gICAgICAgIC8vICAgICAgICAvLyBtb2RhbE9iai5maW5kKFwiI3Rlc3RxcWNcIikub24oJ2NsaWNrJywgJy50ci1yb3cnLFxyXG4gICAgICAgIC8vICAgICAgICBtb2RhbE9iai5maW5kKFwiI3Rlc3RxcWNcIikub24oJ2NsaWNrJyxcclxuICAgICAgICAvLyAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICBtb2RhbE9iai5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vICAgIH0pO1xyXG4gICAgICAgIC8vfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBQYWdlVmFsaWRhdGVJbml0KCkge1xyXG4gICAgICAgIC8vIEZvcm0gVmFsaWRhdGlvblxyXG4gICAgICAgICQoJyNlZGl0LWN1c3RvbWVyLWZvcm0nKS52YWxpZGF0ZSh7XHJcbiAgICAgICAgICAgIHN1Ym1pdEhhbmRsZXI6IGZ1bmN0aW9uIChmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaXNDaGFuZ2VkID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiSXNDaGFuZ2VkXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzQ2hhbmdlZCA9PT0gXCJ0cnVlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtLnN1Ym1pdCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcIuS4puacquacieWFp+WuueiuiuabtO+8jOaVheS4jemAsuihjOizh+aWmeiuiuabtCEhXCIpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJ1bGVzOiB7XHJcbiAgICAgICAgICAgICAgICBDb21wYW55TmFtZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgQ3VzdG9tZXJOYW1lOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWVzc2FnZXM6IHtcclxuICAgICAgICAgICAgICAgIENvbXBhbnlOYW1lOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwi6Kmy5qyE5L2N54K65b+F5aGrISFcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIEN1c3RvbWVyTmFtZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBcIuipsuashOS9jeeCuuW/heWhqyEhXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3JFbGVtZW50OiAnc3BhbicsXHJcbiAgICAgICAgICAgIGVycm9yUGxhY2VtZW50OiBmdW5jdGlvbiAoZXJyb3IsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGVycm9yLmFkZENsYXNzKCdpbnZhbGlkLWZlZWRiYWNrJyk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuYXBwZW5kKGVycm9yKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGlnaGxpZ2h0OiBmdW5jdGlvbiAoZWxlbWVudCwgZXJyb3JDbGFzcywgdmFsaWRDbGFzcykge1xyXG4gICAgICAgICAgICAgICAgJChlbGVtZW50KS5hZGRDbGFzcygnaXMtaW52YWxpZCcpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB1bmhpZ2hsaWdodDogZnVuY3Rpb24gKGVsZW1lbnQsIGVycm9yQ2xhc3MsIHZhbGlkQ2xhc3MpIHtcclxuICAgICAgICAgICAgICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MoJ2lzLWludmFsaWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIFBhZ2UgRnVuY3Rpb24gKi9cclxuICAgIHB1YmxpYyBTZXRDaGFnZVN0YXR1cyhyZXN1bHQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLkRvbU9mSXNDaGFuZ2VkLnZhbHVlID0gcmVzdWx0LnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgLy9wdWJsaWMgRXZlblNob3dfSnFVbERvbTogSlF1ZXJ5PEhUTUxVTGlzdEVsZW1lbnQ+ID0gJCgnI2V2ZW5Qcm9kdWN0THMnKTtcclxuICAgIC8vcHVibGljIE9kZExTaG93X0pxVWxEb206IEpRdWVyeTxIVE1MVUxpc3RFbGVtZW50PiA9ICQoJyNvZGRQcm9kdWN0THMnKTtcclxuICAgIC8vcHVibGljIFVzUHJvZEl0ZW1fSnFTZWxlY3REb206IEpRdWVyeTxIVE1MU2VsZWN0RWxlbWVudD4gPSAkKCcjdXNlci1zZWxlY3QtcHJvZGl0ZW0nKTtcclxuICAgIC8vcHVibGljIFRvdGFsUHJvZEl0ZW1JbmZvX0pxU2VsZWN0RG9tOiBKUXVlcnk8SFRNTEhlYWRpbmdFbGVtZW50PiA9ICQoJyN0b3RhbCcpO1xyXG4gICAgLy9wdWJsaWMgaW5ncmVkaWVudFBvc3RfSnFEaXZEb206IEpRdWVyeTxIVE1MRGl2RWxlbWVudD4gPSAkKCcjaW5ncmVkaWVudFBvc3QnKTtcclxuICAgIC8vcHVibGljIEN1c3RvbWVySWRfSnFTZWxlY3REb206IEpRdWVyeTxIVE1MU2VsZWN0RWxlbWVudD4gPSAkKCcjVkVfUHVyY2hhc2VXZWlnaHROb3RlX0N1c3RvbWVySWQnKTtcclxuICAgIC8vcHVibGljIEN1c3RvbWVyTmFtZV9KcUlucHV0RG9tOiBKUXVlcnk8SFRNTElucHV0RWxlbWVudD4gPSAkKCcjVkVfUHVyY2hhc2VXZWlnaHROb3RlX0N1c3RvbWVyTmFtZScpO1xyXG4gICAgLy9wdWJsaWMgQ2FyTm9JZF9KcVNlbGVjdERvbTogSlF1ZXJ5PEhUTUxFbGVtZW50PiA9ICQoJyNWRV9QdXJjaGFzZVdlaWdodE5vdGVfQ2FyTm9JZCcpO1xyXG4gICAgLy9wdWJsaWMgQ2FyTmFtZV9KcUlucHV0RG9tOiBKUXVlcnk8SFRNTElucHV0RWxlbWVudD4gPSAkKCcjVkVfUHVyY2hhc2VXZWlnaHROb3RlX0Nhck5vJyk7XHJcbiAgICAvL3B1YmxpYyBGdWxsV2VpZ2h0X0RvbSA9ICQoJyNWRV9QdXJjaGFzZVdlaWdodE5vdGVfRnVsbFdlaWdodCcpLmdldCgwKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgLy9wdWJsaWMgRGVmZWN0aXZlV2VpZ2h0X0RPTSA9ICQoJyNWRV9QdXJjaGFzZVdlaWdodE5vdGVfRGVmZWN0aXZlV2VpZ2h0JykuZ2V0KDApIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAvL3B1YmxpYyBVbml0UHJpY2VfRE9NID0gJCgnI1ZFX1B1cmNoYXNlV2VpZ2h0Tm90ZV9Vbml0UHJpY2UnKS5nZXQoMCkgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgIC8vcHVibGljIFRyYWZpY1VuaXRQcmljZV9ET00gPSAkKCcjVkVfUHVyY2hhc2VXZWlnaHROb3RlX1RyYWZpY1VuaXRQcmljZScpLmdldCgwKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgLy9wdWJsaWMgVGhpcmRXZWlnaHRGZWVfRE9NID0gJCgnI1ZFX1B1cmNoYXNlV2VpZ2h0Tm90ZV9UaGlyZFdlaWdodEZlZScpLmdldCgwKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgLy9wdWJsaWMgSGFzVGF4TGlzdCA9ICQoXCIuaXNoYXNfdGF4XCIpLmdldCgpIGFzIEhUTUxJbnB1dEVsZW1lbnRbXTtcclxuICAgIC8vcHVibGljIERpc3BsYXlGaW5hbFByaWNlX0RPTSA9ICQoJyNzaG93X2ZpbmFsX3ByaWNlJykuZ2V0KDApIGFzIEhUTUxIZWFkaW5nRWxlbWVudDtcclxuICAgIC8vcHVibGljIERpc3BsYXlXZWlnaHRQcmljZV9ET00gPSAkKCcjc2hvd193ZWlnaHRfcHJpY2UnKS5nZXQoMCkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAvL3B1YmxpYyBEaXNwYWx5VHJhZmljUHJpY2VfRE9NID0gJCgnI3Nob3dfdHJhZmljX3ByaWNlJykuZ2V0KDApIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgLy9wdWJsaWMgQWN0dWFsUHJpY2VfRE9NID0gJCgnI1ZFX1B1cmNoYXNlV2VpZ2h0Tm90ZV9BY3R1YWxQcmljZScpLmdldCgwKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIC8vcHVibGljIEN1c3RvbWVySWRfQ2hhbmdlKCkge1xyXG4gICAgLy8gICAgY29uc3QgdGhpc09iaiA9IHRoaXM7XHJcblxyXG4gICAgLy8gICAgdGhpcy5DdXN0b21lck5hbWVfSnFJbnB1dERvbS52YWwoXCJcIik7XHJcbiAgICAvLyAgICB0aGlzLkNhck5hbWVfSnFJbnB1dERvbS52YWwoXCJcIik7IC8vIOi7iueJjOWQjeeosea4heepulxyXG5cclxuICAgIC8vICAgIGlmICh0aGlzLkN1c3RvbWVySWRfSnFTZWxlY3REb20gJiZcclxuICAgIC8vICAgICAgICB0aGlzLkN1c3RvbWVySWRfSnFTZWxlY3REb20uZmluZCgnOnNlbGVjdGVkJykudmFsKCkgPT09IFwiMFwiKSB7ICAvLyDmlrDlrqLmiLZcclxuICAgIC8vICAgICAgICB0aGlzLkN1c3RvbWVyTmFtZV9KcUlucHV0RG9tLnJlbW92ZUF0dHIoXCJyZWFkb25seVwiKTtcclxuICAgIC8vICAgICAgICB0aGlzT2JqLlJlU2V0Q2FyTm9JdGVtcyhbXSk7XHJcbiAgICAvLyAgICB9IGVsc2Uge1xyXG4gICAgLy8gICAgICAgIHRoaXMuQ3VzdG9tZXJOYW1lX0pxSW5wdXREb20uYXR0cihcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XHJcbiAgICAvLyAgICAgICAgdGhpcy5DdXN0b21lck5hbWVfSnFJbnB1dERvbS52YWwodGhpcy5DdXN0b21lcklkX0pxU2VsZWN0RG9tLmZpbmQoJzpzZWxlY3RlZCcpLnRleHQoKSk7XHJcbiAgICAvLyAgICAgICAgbGV0IGZ1bmNScyA9IHRoaXMuQ3VzdG9tZXJBUEkuR2V0Q2FyTm9JdGVtc0J5KHRoaXMuQ3VzdG9tZXJJZF9KcVNlbGVjdERvbS5maW5kKCc6c2VsZWN0ZWQnKS52YWwoKS50b1N0cmluZygpKTtcclxuICAgIC8vICAgICAgICAkLndoZW4oZnVuY1JzKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAvLyAgICAgICAgICAgIHRoaXNPYmouUmVTZXRDYXJOb0l0ZW1zKGRhdGEpO1xyXG4gICAgLy8gICAgICAgIH0pO1xyXG4gICAgLy8gICAgfVxyXG4gICAgLy99XHJcblxyXG4gICAgLy9wdWJsaWMgQ2FyTm9JZF9DaGFuZ2UoKSB7XHJcbiAgICAvLyAgICB0aGlzLkNhck5hbWVfSnFJbnB1dERvbS52YWwoXCJcIik7XHJcbiAgICAvLyAgICBpZiAodGhpcy5DYXJOb0lkX0pxU2VsZWN0RG9tICYmXHJcbiAgICAvLyAgICAgICAgdGhpcy5DYXJOb0lkX0pxU2VsZWN0RG9tLmZpbmQoJzpzZWxlY3RlZCcpLnZhbCgpID09PSBcIjBcIikge1xyXG4gICAgLy8gICAgICAgIHRoaXMuQ2FyTmFtZV9KcUlucHV0RG9tLnJlbW92ZUF0dHIoXCJyZWFkb25seVwiKTtcclxuICAgIC8vICAgIH0gZWxzZSB7XHJcbiAgICAvLyAgICAgICAgdGhpcy5DYXJOYW1lX0pxSW5wdXREb20uYXR0cihcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XHJcbiAgICAvLyAgICAgICAgdGhpcy5DYXJOYW1lX0pxSW5wdXREb20udmFsKHRoaXMuQ2FyTm9JZF9KcVNlbGVjdERvbS5maW5kKCc6c2VsZWN0ZWQnKS50ZXh0KCkpO1xyXG4gICAgLy8gICAgfVxyXG4gICAgLy99XHJcblxyXG4gICAgLy9wcml2YXRlIFJlU2V0Q2FyTm9JdGVtcyhkYXRhT2JqTHMpIHtcclxuICAgIC8vICAgIGNvbnN0IHRoaXNQYWdPYmogPSB0aGlzO1xyXG4gICAgLy8gICAgdGhpc1BhZ09iai5DYXJOb0lkX0pxU2VsZWN0RG9tLmh0bWwoJycpOyAgLy8g6YG46aCF5riF56m6XHJcbiAgICAvLyAgICBsZXQgZGVmYXVsdE9wdGlvbiA9IG5ldyBPcHRpb24oXCIwLuaWsOi7iueJjFwiLCBcIjBcIiwgZmFsc2UsIGZhbHNlKTtcclxuICAgIC8vICAgIHRoaXNQYWdPYmouQ2FyTm9JZF9KcVNlbGVjdERvbS5hcHBlbmQoZGVmYXVsdE9wdGlvbik7XHJcbiAgICAvLyAgICBkYXRhT2JqTHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgeyAgLy8g5riF5Zau6aCF55uuXHJcbiAgICAvLyAgICAgICAgbGV0IG5ld09wdGlvbiA9IG5ldyBPcHRpb24oaXRlbS5jYXJOYW1lLCBpdGVtLmlkLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgLy8gICAgICAgIHRoaXNQYWdPYmouQ2FyTm9JZF9KcVNlbGVjdERvbS5hcHBlbmQobmV3T3B0aW9uKTtcclxuICAgIC8vICAgIH0pO1xyXG4gICAgLy99XHJcblxyXG5cclxuXHJcblxyXG5cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdfQ==