var OnlineInfoPage = /** @class */ (function () {
    function OnlineInfoPage(baseUrl) {
        if (baseUrl === void 0) { baseUrl = ""; }
        // Page  Dom
        this.EditCompanyName_Dom = document.getElementById('EditCompanyName');
        this.ShowEditCompanyName_Dom = document.getElementById('show-edit-companyName');
        this.EvenShow_JqUlDom = $('#evenProductLs');
        this.OddLShow_JqUlDom = $('#oddProductLs');
        this.UsProdItem_JqSelectDom = $('#user-select-proditem');
        this.TotalProdItemInfo_JqSelectDom = $('#total');
        this.ingredientPost_JqDivDom = $('#ingredientPost');
        this.CustomerId_JqSelectDom = $('#VE_PurchaseWeightNote_CustomerId');
        this.CustomerName_JqInputDom = $('#VE_PurchaseWeightNote_CustomerName');
        this.CarNoId_JqSelectDom = $('#VE_PurchaseWeightNote_CarNoId');
        this.CarName_JqInputDom = $('#VE_PurchaseWeightNote_CarNo');
        this.FullWeight_Dom = $('#VE_PurchaseWeightNote_FullWeight').get(0);
        this.DefectiveWeight_DOM = $('#VE_PurchaseWeightNote_DefectiveWeight').get(0);
        this.UnitPrice_DOM = $('#VE_PurchaseWeightNote_UnitPrice').get(0);
        this.TraficUnitPrice_DOM = $('#VE_PurchaseWeightNote_TraficUnitPrice').get(0);
        this.ThirdWeightFee_DOM = $('#VE_PurchaseWeightNote_ThirdWeightFee').get(0);
        this.HasTaxList = $(".ishas_tax").get();
        this.DisplayFinalPrice_DOM = $('#show_final_price').get(0);
        this.DisplayWeightPrice_DOM = $('#show_weight_price').get(0);
        this.DispalyTraficPrice_DOM = $('#show_trafic_price').get(0);
        this.ActualPrice_DOM = $('#VE_PurchaseWeightNote_ActualPrice').get(0);
        this.BaseUrl = baseUrl;
        this.SysConfigPageHelper = new SysConfigPage(this.BaseUrl);
    }
    /* Action */
    OnlineInfoPage.prototype.EditCompanyName_Keyup = function () {
        if (this.EditCompanyName_Dom.value.length > 0) {
            this.ShowEditCompanyName_Dom.innerHTML = "=> \u8B8A\u66F4\u70BA : " + this.EditCompanyName_Dom.value;
            this.ShowEditCompanyName_Dom.style.color = "red";
        }
        else {
            this.ShowEditCompanyName_Dom.innerHTML = "";
        }
    };
    OnlineInfoPage.prototype.Test2Func = function () {
        var modalUrl = this.BaseUrl + "/SysConfig/Customer/_GetCarNoInfoModel";
        return $.get(modalUrl, { carGUID: encodeURIComponent("") }).done(function (data) {
            $("div[name=model-temp-carnoinfo]").html(data);
            var modalObj = $("div[name=model-temp-carnoinfo]").find('#myModal');
            modalObj.modal('show');
            //var modalObj = $("div[name=modal-temp-productId]").find('#modal-productId-selected');
            //var jTableObj = modalObj.find("#productId-table").DataTable({
            //    dom: 'Blfrtip',
            //    buttons: [
            //        {
            //            text: '選擇完畢',
            //            className: "btn btn-primary",
            //            action: function (e, dt, node, config) {
            //                $.each(jTableObj.rows('.selected').data(), function (index, item) {
            //                    if ($.inArray(item[0], thisObj.ProductList) === -1) {
            //                        thisObj.ProductList.push(item[0]);
            //                    };
            //                });
            //                modalObj.modal('hide');
            //            }
            //        }
            //    ],
            //    select: {
            //        style: 'multi'
            //    }
            //});
        });
    };
    OnlineInfoPage.prototype.Test3Func = function () {
        var modalUrl = this.BaseUrl + "/SysConfig/Customer/_GetCarNoInfoModel";
        return $.get(modalUrl).done(function (data) {
            $("div[name=model-temp-carnoinfo]").html(data);
            var modalObj = $("div[name=model-temp-carnoinfo]").find('#myModal');
            modalObj.modal('show');
        });
    };
    OnlineInfoPage.prototype.CarNoId_Change = function () {
        this.CarName_JqInputDom.val("");
        if (this.CarNoId_JqSelectDom &&
            this.CarNoId_JqSelectDom.find(':selected').val() === "0") {
            this.CarName_JqInputDom.removeAttr("readonly");
        }
        else {
            this.CarName_JqInputDom.attr("readonly", "readonly");
            this.CarName_JqInputDom.val(this.CarNoId_JqSelectDom.find(':selected').text());
        }
    };
    /* Page Function */
    OnlineInfoPage.prototype.ReSetCarNoItems = function (dataObjLs) {
        var thisPagObj = this;
        thisPagObj.CarNoId_JqSelectDom.html(''); // 選項清空
        var defaultOption = new Option("0.新車牌", "0", false, false);
        thisPagObj.CarNoId_JqSelectDom.append(defaultOption);
        dataObjLs.forEach(function (item) {
            var newOption = new Option(item.carName, item.id, false, false);
            thisPagObj.CarNoId_JqSelectDom.append(newOption);
        });
    };
    return OnlineInfoPage;
}());
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3lzY29uZmlnQ2FyTm9PbmxpbmVJbmZvLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc2NyaXB0cy9TeXNjb25maWdDYXJOb09ubGluZUluZm8udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFtQ0ksd0JBQVksT0FBb0I7UUFBcEIsd0JBQUEsRUFBQSxZQUFvQjtRQTdCaEMsWUFBWTtRQUNMLHdCQUFtQixHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsaUJBQWlCLENBQXFCLENBQUM7UUFDckYsNEJBQXVCLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyx1QkFBdUIsQ0FBb0IsQ0FBQztRQUc5RixxQkFBZ0IsR0FBNkIsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDakUscUJBQWdCLEdBQTZCLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNoRSwyQkFBc0IsR0FBOEIsQ0FBQyxDQUFDLHVCQUF1QixDQUFDLENBQUM7UUFDL0Usa0NBQTZCLEdBQStCLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN4RSw0QkFBdUIsR0FBMkIsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDdkUsMkJBQXNCLEdBQThCLENBQUMsQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO1FBQzNGLDRCQUF1QixHQUE2QixDQUFDLENBQUMscUNBQXFDLENBQUMsQ0FBQztRQUM3Rix3QkFBbUIsR0FBd0IsQ0FBQyxDQUFDLGdDQUFnQyxDQUFDLENBQUM7UUFDL0UsdUJBQWtCLEdBQTZCLENBQUMsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO1FBQ2pGLG1CQUFjLEdBQUcsQ0FBQyxDQUFDLG1DQUFtQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBcUIsQ0FBQztRQUNuRix3QkFBbUIsR0FBRyxDQUFDLENBQUMsd0NBQXdDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFxQixDQUFDO1FBQzdGLGtCQUFhLEdBQUcsQ0FBQyxDQUFDLGtDQUFrQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBcUIsQ0FBQztRQUNqRix3QkFBbUIsR0FBRyxDQUFDLENBQUMsd0NBQXdDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFxQixDQUFDO1FBQzdGLHVCQUFrQixHQUFHLENBQUMsQ0FBQyx1Q0FBdUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQXFCLENBQUM7UUFDM0YsZUFBVSxHQUFHLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxHQUFHLEVBQXdCLENBQUM7UUFDekQsMEJBQXFCLEdBQUcsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBdUIsQ0FBQztRQUM1RSwyQkFBc0IsR0FBRyxDQUFDLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFtQixDQUFDO1FBQzFFLDJCQUFzQixHQUFHLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQW1CLENBQUM7UUFDMUUsb0JBQWUsR0FBRyxDQUFDLENBQUMsb0NBQW9DLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFxQixDQUFDO1FBT3hGLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLGFBQWEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQUdELFlBQVk7SUFDTCw4Q0FBcUIsR0FBNUI7UUFDSSxJQUFJLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUMzQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsU0FBUyxHQUFHLDZCQUFZLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxLQUFPLENBQUM7WUFDdEYsSUFBSSxDQUFDLHVCQUF1QixDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1NBQ3BEO2FBQU07WUFDSCxJQUFJLENBQUMsdUJBQXVCLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQTtTQUM5QztJQUNMLENBQUM7SUFFTSxrQ0FBUyxHQUFoQjtRQUNJLElBQU0sUUFBUSxHQUFNLElBQUksQ0FBQyxPQUFPLDJDQUF3QyxDQUFDO1FBRXpFLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsRUFBRSxPQUFPLEVBQUUsa0JBQWtCLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUk7WUFDM0UsQ0FBQyxDQUFDLGdDQUFnQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQy9DLElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNwRSxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRXZCLHVGQUF1RjtZQUN2RiwrREFBK0Q7WUFDL0QscUJBQXFCO1lBQ3JCLGdCQUFnQjtZQUNoQixXQUFXO1lBQ1gsMkJBQTJCO1lBQzNCLDJDQUEyQztZQUMzQyxzREFBc0Q7WUFDdEQscUZBQXFGO1lBQ3JGLDJFQUEyRTtZQUMzRSw0REFBNEQ7WUFDNUQsd0JBQXdCO1lBQ3hCLHFCQUFxQjtZQUNyQix5Q0FBeUM7WUFDekMsZUFBZTtZQUNmLFdBQVc7WUFDWCxRQUFRO1lBQ1IsZUFBZTtZQUNmLHdCQUF3QjtZQUN4QixPQUFPO1lBQ1AsS0FBSztRQUVULENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVNLGtDQUFTLEdBQWhCO1FBQ0ksSUFBTSxRQUFRLEdBQU0sSUFBSSxDQUFDLE9BQU8sMkNBQXdDLENBQUM7UUFFekUsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUk7WUFDdEMsQ0FBQyxDQUFDLGdDQUFnQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQy9DLElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNwRSxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzNCLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQU1NLHVDQUFjLEdBQXJCO1FBQ0ksSUFBSSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNoQyxJQUFJLElBQUksQ0FBQyxtQkFBbUI7WUFDeEIsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxHQUFHLEVBQUU7WUFDMUQsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUNsRDthQUFNO1lBQ0gsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFDckQsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7U0FDbEY7SUFDTCxDQUFDO0lBTUQsbUJBQW1CO0lBR1gsd0NBQWUsR0FBdkIsVUFBd0IsU0FBUztRQUM3QixJQUFNLFVBQVUsR0FBRyxJQUFJLENBQUM7UUFDeEIsVUFBVSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFFLE9BQU87UUFDakQsSUFBSSxhQUFhLEdBQUcsSUFBSSxNQUFNLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDM0QsVUFBVSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUNyRCxTQUFTLENBQUMsT0FBTyxDQUFDLFVBQVUsSUFBSTtZQUM1QixJQUFJLFNBQVMsR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ2hFLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDckQsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUwscUJBQUM7QUFBRCxDQUFDLEFBL0hELElBK0hDIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgT25saW5lSW5mb1BhZ2Uge1xyXG4gICAgLy8gUG9ycGVyaXRlc1xyXG4gICAgcmVhZG9ubHkgQmFzZVVybDogc3RyaW5nO1xyXG4gICAgcmVhZG9ubHkgSGFzQ2hhbmdlOiBib29sZWFuO1xyXG5cclxuXHJcbiAgICAvLyBQYWdlICBEb21cclxuICAgIHB1YmxpYyBFZGl0Q29tcGFueU5hbWVfRG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0VkaXRDb21wYW55TmFtZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICBwdWJsaWMgU2hvd0VkaXRDb21wYW55TmFtZV9Eb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hvdy1lZGl0LWNvbXBhbnlOYW1lJykgYXMgSFRNTFNwYW5FbGVtZW50O1xyXG5cclxuXHJcbiAgICBwdWJsaWMgRXZlblNob3dfSnFVbERvbTogSlF1ZXJ5PEhUTUxVTGlzdEVsZW1lbnQ+ID0gJCgnI2V2ZW5Qcm9kdWN0THMnKTtcclxuICAgIHB1YmxpYyBPZGRMU2hvd19KcVVsRG9tOiBKUXVlcnk8SFRNTFVMaXN0RWxlbWVudD4gPSAkKCcjb2RkUHJvZHVjdExzJyk7XHJcbiAgICBwdWJsaWMgVXNQcm9kSXRlbV9KcVNlbGVjdERvbTogSlF1ZXJ5PEhUTUxTZWxlY3RFbGVtZW50PiA9ICQoJyN1c2VyLXNlbGVjdC1wcm9kaXRlbScpO1xyXG4gICAgcHVibGljIFRvdGFsUHJvZEl0ZW1JbmZvX0pxU2VsZWN0RG9tOiBKUXVlcnk8SFRNTEhlYWRpbmdFbGVtZW50PiA9ICQoJyN0b3RhbCcpO1xyXG4gICAgcHVibGljIGluZ3JlZGllbnRQb3N0X0pxRGl2RG9tOiBKUXVlcnk8SFRNTERpdkVsZW1lbnQ+ID0gJCgnI2luZ3JlZGllbnRQb3N0Jyk7XHJcbiAgICBwdWJsaWMgQ3VzdG9tZXJJZF9KcVNlbGVjdERvbTogSlF1ZXJ5PEhUTUxTZWxlY3RFbGVtZW50PiA9ICQoJyNWRV9QdXJjaGFzZVdlaWdodE5vdGVfQ3VzdG9tZXJJZCcpO1xyXG4gICAgcHVibGljIEN1c3RvbWVyTmFtZV9KcUlucHV0RG9tOiBKUXVlcnk8SFRNTElucHV0RWxlbWVudD4gPSAkKCcjVkVfUHVyY2hhc2VXZWlnaHROb3RlX0N1c3RvbWVyTmFtZScpO1xyXG4gICAgcHVibGljIENhck5vSWRfSnFTZWxlY3REb206IEpRdWVyeTxIVE1MRWxlbWVudD4gPSAkKCcjVkVfUHVyY2hhc2VXZWlnaHROb3RlX0Nhck5vSWQnKTtcclxuICAgIHB1YmxpYyBDYXJOYW1lX0pxSW5wdXREb206IEpRdWVyeTxIVE1MSW5wdXRFbGVtZW50PiA9ICQoJyNWRV9QdXJjaGFzZVdlaWdodE5vdGVfQ2FyTm8nKTtcclxuICAgIHB1YmxpYyBGdWxsV2VpZ2h0X0RvbSA9ICQoJyNWRV9QdXJjaGFzZVdlaWdodE5vdGVfRnVsbFdlaWdodCcpLmdldCgwKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgcHVibGljIERlZmVjdGl2ZVdlaWdodF9ET00gPSAkKCcjVkVfUHVyY2hhc2VXZWlnaHROb3RlX0RlZmVjdGl2ZVdlaWdodCcpLmdldCgwKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgcHVibGljIFVuaXRQcmljZV9ET00gPSAkKCcjVkVfUHVyY2hhc2VXZWlnaHROb3RlX1VuaXRQcmljZScpLmdldCgwKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgcHVibGljIFRyYWZpY1VuaXRQcmljZV9ET00gPSAkKCcjVkVfUHVyY2hhc2VXZWlnaHROb3RlX1RyYWZpY1VuaXRQcmljZScpLmdldCgwKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgcHVibGljIFRoaXJkV2VpZ2h0RmVlX0RPTSA9ICQoJyNWRV9QdXJjaGFzZVdlaWdodE5vdGVfVGhpcmRXZWlnaHRGZWUnKS5nZXQoMCkgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgIHB1YmxpYyBIYXNUYXhMaXN0ID0gJChcIi5pc2hhc190YXhcIikuZ2V0KCkgYXMgSFRNTElucHV0RWxlbWVudFtdO1xyXG4gICAgcHVibGljIERpc3BsYXlGaW5hbFByaWNlX0RPTSA9ICQoJyNzaG93X2ZpbmFsX3ByaWNlJykuZ2V0KDApIGFzIEhUTUxIZWFkaW5nRWxlbWVudDtcclxuICAgIHB1YmxpYyBEaXNwbGF5V2VpZ2h0UHJpY2VfRE9NID0gJCgnI3Nob3dfd2VpZ2h0X3ByaWNlJykuZ2V0KDApIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHVibGljIERpc3BhbHlUcmFmaWNQcmljZV9ET00gPSAkKCcjc2hvd190cmFmaWNfcHJpY2UnKS5nZXQoMCkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwdWJsaWMgQWN0dWFsUHJpY2VfRE9NID0gJCgnI1ZFX1B1cmNoYXNlV2VpZ2h0Tm90ZV9BY3R1YWxQcmljZScpLmdldCgwKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuICAgIC8vIFdlYkFQSVxyXG4gICAgcHJpdmF0ZSBTeXNDb25maWdQYWdlSGVscGVyOiBTeXNDb25maWdQYWdlO1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihiYXNlVXJsOiBzdHJpbmcgPSBcIlwiKSB7XHJcbiAgICAgICAgdGhpcy5CYXNlVXJsID0gYmFzZVVybDtcclxuICAgICAgICB0aGlzLlN5c0NvbmZpZ1BhZ2VIZWxwZXIgPSBuZXcgU3lzQ29uZmlnUGFnZSh0aGlzLkJhc2VVcmwpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKiBBY3Rpb24gKi9cclxuICAgIHB1YmxpYyBFZGl0Q29tcGFueU5hbWVfS2V5dXAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuRWRpdENvbXBhbnlOYW1lX0RvbS52YWx1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuU2hvd0VkaXRDb21wYW55TmFtZV9Eb20uaW5uZXJIVE1MID0gYD0+IOiuiuabtOeCuiA6ICR7dGhpcy5FZGl0Q29tcGFueU5hbWVfRG9tLnZhbHVlfWA7XHJcbiAgICAgICAgICAgIHRoaXMuU2hvd0VkaXRDb21wYW55TmFtZV9Eb20uc3R5bGUuY29sb3IgPSBcInJlZFwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuU2hvd0VkaXRDb21wYW55TmFtZV9Eb20uaW5uZXJIVE1MID0gXCJcIlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgVGVzdDJGdW5jKCkge1xyXG4gICAgICAgIGNvbnN0IG1vZGFsVXJsID0gYCR7dGhpcy5CYXNlVXJsfS9TeXNDb25maWcvQ3VzdG9tZXIvX0dldENhck5vSW5mb01vZGVsYDtcclxuXHJcbiAgICAgICAgcmV0dXJuICQuZ2V0KG1vZGFsVXJsLCB7IGNhckdVSUQ6IGVuY29kZVVSSUNvbXBvbmVudChcIlwiKSB9KS5kb25lKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICQoXCJkaXZbbmFtZT1tb2RlbC10ZW1wLWNhcm5vaW5mb11cIikuaHRtbChkYXRhKTtcclxuICAgICAgICAgICAgdmFyIG1vZGFsT2JqID0gJChcImRpdltuYW1lPW1vZGVsLXRlbXAtY2Fybm9pbmZvXVwiKS5maW5kKCcjbXlNb2RhbCcpO1xyXG4gICAgICAgICAgICBtb2RhbE9iai5tb2RhbCgnc2hvdycpO1xyXG5cclxuICAgICAgICAgICAgLy92YXIgbW9kYWxPYmogPSAkKFwiZGl2W25hbWU9bW9kYWwtdGVtcC1wcm9kdWN0SWRdXCIpLmZpbmQoJyNtb2RhbC1wcm9kdWN0SWQtc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgLy92YXIgalRhYmxlT2JqID0gbW9kYWxPYmouZmluZChcIiNwcm9kdWN0SWQtdGFibGVcIikuRGF0YVRhYmxlKHtcclxuICAgICAgICAgICAgLy8gICAgZG9tOiAnQmxmcnRpcCcsXHJcbiAgICAgICAgICAgIC8vICAgIGJ1dHRvbnM6IFtcclxuICAgICAgICAgICAgLy8gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICB0ZXh0OiAn6YG45pOH5a6M55WiJyxcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICBjbGFzc05hbWU6IFwiYnRuIGJ0bi1wcmltYXJ5XCIsXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoZSwgZHQsIG5vZGUsIGNvbmZpZykge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAkLmVhY2goalRhYmxlT2JqLnJvd3MoJy5zZWxlY3RlZCcpLmRhdGEoKSwgZnVuY3Rpb24gKGluZGV4LCBpdGVtKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICBpZiAoJC5pbkFycmF5KGl0ZW1bMF0sIHRoaXNPYmouUHJvZHVjdExpc3QpID09PSAtMSkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNPYmouUHJvZHVjdExpc3QucHVzaChpdGVtWzBdKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICBtb2RhbE9iai5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gICAgICAgIH1cclxuICAgICAgICAgICAgLy8gICAgXSxcclxuICAgICAgICAgICAgLy8gICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICBzdHlsZTogJ211bHRpJ1xyXG4gICAgICAgICAgICAvLyAgICB9XHJcbiAgICAgICAgICAgIC8vfSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBUZXN0M0Z1bmMoKSB7XHJcbiAgICAgICAgY29uc3QgbW9kYWxVcmwgPSBgJHt0aGlzLkJhc2VVcmx9L1N5c0NvbmZpZy9DdXN0b21lci9fR2V0Q2FyTm9JbmZvTW9kZWxgO1xyXG5cclxuICAgICAgICByZXR1cm4gJC5nZXQobW9kYWxVcmwpLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgJChcImRpdltuYW1lPW1vZGVsLXRlbXAtY2Fybm9pbmZvXVwiKS5odG1sKGRhdGEpO1xyXG4gICAgICAgICAgICB2YXIgbW9kYWxPYmogPSAkKFwiZGl2W25hbWU9bW9kZWwtdGVtcC1jYXJub2luZm9dXCIpLmZpbmQoJyNteU1vZGFsJyk7XHJcbiAgICAgICAgICAgIG1vZGFsT2JqLm1vZGFsKCdzaG93Jyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIHB1YmxpYyBDYXJOb0lkX0NoYW5nZSgpIHtcclxuICAgICAgICB0aGlzLkNhck5hbWVfSnFJbnB1dERvbS52YWwoXCJcIik7XHJcbiAgICAgICAgaWYgKHRoaXMuQ2FyTm9JZF9KcVNlbGVjdERvbSAmJlxyXG4gICAgICAgICAgICB0aGlzLkNhck5vSWRfSnFTZWxlY3REb20uZmluZCgnOnNlbGVjdGVkJykudmFsKCkgPT09IFwiMFwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuQ2FyTmFtZV9KcUlucHV0RG9tLnJlbW92ZUF0dHIoXCJyZWFkb25seVwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLkNhck5hbWVfSnFJbnB1dERvbS5hdHRyKFwicmVhZG9ubHlcIiwgXCJyZWFkb25seVwiKTtcclxuICAgICAgICAgICAgdGhpcy5DYXJOYW1lX0pxSW5wdXREb20udmFsKHRoaXMuQ2FyTm9JZF9KcVNlbGVjdERvbS5maW5kKCc6c2VsZWN0ZWQnKS50ZXh0KCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgLyogUGFnZSBGdW5jdGlvbiAqL1xyXG5cclxuXHJcbiAgICBwcml2YXRlIFJlU2V0Q2FyTm9JdGVtcyhkYXRhT2JqTHMpIHtcclxuICAgICAgICBjb25zdCB0aGlzUGFnT2JqID0gdGhpcztcclxuICAgICAgICB0aGlzUGFnT2JqLkNhck5vSWRfSnFTZWxlY3REb20uaHRtbCgnJyk7ICAvLyDpgbjpoIXmuIXnqbpcclxuICAgICAgICBsZXQgZGVmYXVsdE9wdGlvbiA9IG5ldyBPcHRpb24oXCIwLuaWsOi7iueJjFwiLCBcIjBcIiwgZmFsc2UsIGZhbHNlKTtcclxuICAgICAgICB0aGlzUGFnT2JqLkNhck5vSWRfSnFTZWxlY3REb20uYXBwZW5kKGRlZmF1bHRPcHRpb24pO1xyXG4gICAgICAgIGRhdGFPYmpMcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7ICAvLyDmuIXllq7poIXnm65cclxuICAgICAgICAgICAgbGV0IG5ld09wdGlvbiA9IG5ldyBPcHRpb24oaXRlbS5jYXJOYW1lLCBpdGVtLmlkLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzUGFnT2JqLkNhck5vSWRfSnFTZWxlY3REb20uYXBwZW5kKG5ld09wdGlvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG4iXX0=